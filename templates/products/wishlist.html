{% include 'navbar.html' %}
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Online Grocery Shopping and Online Supermarket in India - bigbasket</title>
  <link rel="shortcut icon"
    href="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcT3XfekLrDCd5cGYZHG0XelJNQ-hUCq2Jj6Vg&s"
    type="image/x-icon">
  <link rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200&icon_names=search" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">

  {% load static %}
  <link rel="stylesheet" href="{% static 'css/style.css' %}">
  <script src="{% static 'js/style.js' %}"></script>


</head>

<body>
  <nav class="breadcrumb">
        <a href="{% url 'home' %}" style="text-decoration: none;color: rgb(84, 79, 79);margin-left: 200px;margin-top: 20px;">Home/</a>Wishlist
    </nav>

    <div class="basket-container" style="margin-top: 20px;">
    <p class="basket-title">My Wishlist</p>
    <div class="basket-wrapper">
      <button class="scroll-btn left" onclick="scrollBasket(-1)">
        &#8249; <!-- Left arrow -->
      </button>
      <div class="basket-scroll" id="basketScroll">
        {% for item in wishlist_items %}
        <div class="card">
          <div class="card-image-wrapper">
            <div class="offer-label">20% OFF</div>
            {% if item.product.image %}

            <!-- hhhhh -->
            {% if item.product.quantity is 0 %}
              
              {% if item.product.image %}
              <a href="{% url 'products:product_detail' item.product.id %}">
                <img src="{{ item.product.image }}" alt="{{ item.product.name }}">
              </a>
              <div class="out-of-stock-overlay">Out Of Stock</div>
              {% endif %}
            {% else %}
              {% if item.product.image %}
              <a href="{% url 'products:product_detail' item.product.id %}">
                <img src="{{ item.product.image }}" alt="{{ item.product.name }}">
              </a>
              {% endif %}
            {% endif %}
            
            {% endif %}
          </div>

          <div class="time-label">5 MINS</div>
          <h3 class="product-name">{{ item.product.name }}</h3>
          <p class="product-desc">{{ item.product.description }}</p>
          <p class="product-price">â‚¹ {{ item.product.price }}</p>

          <form method="POST" action="{% url 'products:move_to_cart' item.product.id %}">
            {% csrf_token %}
          <input type="hidden" name="product_id" value="{{ item.product.id }}">
          {% if item.product.quantity is 0 %}
          <button class="add-btn3" data-product-id="{{ product.id }}" disabled>Out of Stock</button>
            
          {% else %}
          <button type="submit" class="add-btn2">Add to Cart</button>
          {% endif %}

          <div class="wishlist-actions">
          <button class="remove-wishlist-btn add-btn3" data-id="{{ item.id }}">Remove</button>
          </div>
          
      </form>
        </div>
        {% endfor %}
      </div>
      

      <button class="scroll-btn right" onclick="scrollBasket(1)">
        &#8250; <!-- Right arrow -->
      </button>
    </div>
  </div>

    {% block content %}
    {% endblock %}

</body>

<script src="{% static 'js/style.js' %}"></script>
<script>
  // Show/hide mega-menu on button click
document.getElementById('openMegaMenu').addEventListener('click', function(e) {
  document.getElementById('megaMenuDropdown').classList.toggle('active');
});

// Set up hover for categories and subcategories
const mainCats = document.querySelectorAll('.main-cat');
const subMenus = document.querySelectorAll('.level-two');
const subCats = document.querySelectorAll('.sub-cat');
const subSubMenus = document.querySelectorAll('.level-three');

mainCats.forEach(cat => {
  cat.addEventListener('mouseenter', function() {
    // Remove .active from all main and sub menus
    mainCats.forEach(c => c.classList.remove('active'));
    subMenus.forEach(s => s.classList.remove('active'));
    subSubMenus.forEach(s => s.classList.remove('active'));
    // Activate hovered main cat
    cat.classList.add('active');
    const submenu = document.getElementById('sub-' + cat.dataset.sub);
    if (submenu) submenu.classList.add('active');
  });
});

subCats.forEach(subcat => {
  subcat.addEventListener('mouseenter', function(e) {
    // Remove .active from all sub-sub-menus
    subSubMenus.forEach(s => s.classList.remove('active'));
    subCats.forEach(s => s.classList.remove('active'));
    // Activate hovered sub-cat
    subcat.classList.add('active');
    const subsubmenu = document.getElementById('subsub-' + subcat.dataset.subsub);
    if (subsubmenu) subsubmenu.classList.add('active');
    e.stopPropagation();
  });
});

document.addEventListener('click', function(e) {
  // Hide menu if click outside
  if (!document.querySelector('.mega-menu-container').contains(e.target)) {
    document.getElementById('megaMenuDropdown').classList.remove('active');
    subMenus.forEach(s => s.classList.remove('active'));
    mainCats.forEach(c => c.classList.remove('active'));
    subSubMenus.forEach(s => s.classList.remove('active'));
    subCats.forEach(s => s.classList.remove('active'));
  }
});

</script>

</html>